---
title: 箭头函数
date: 2020-04-24 18:25:12
weight: 20
---

## 大纲

箭头函数没有this

Vue中使用箭头函数不能在外层使用

箭头函数的三种写法

```js
let fn = (p1, p2)=>{ return p1+p2 }
// 只有一个参数可以省去括号
let fn = p1 => { return p1+p2 }
// 花括号内只有一句话，并且那句话是return的内容
let fn = p1 => p1*2
```

使用箭头函数简化API操作

```js
let array = [1, 2, 3, 4, 5]
array.map(number => number * number)
```

## ES3 函数声明

### 具名函数

```js
function fn(p1, p2){
    console.log(p1, p2)
}
```

### 匿名函数

声明一个变量，并把匿名函数赋值给该变量

```js
let fn = function(p1, p2){
    console.log(p1)
    return p2
}
```

## 箭头函数写法

### 写法1

```js
let fn = (p1, p2)=>{
    console.log(p1+p2)
    return p1+p2
}
```

### 写法2

只有一个参数时可以不写括号

```js
let fn = p1 => {
    console.log(p1+p2)
    return p1+p2
}
```

### 写法3

花括号内只有一句话并且是 return 后的内容时可以不写花括号(只有一个函数体，并且要 return 这个函数体时)

```js
let fn = p1 => p1*2
// 完整写法
let fn = (p1) => {
    return p1 * 2
}
```

## 使用箭头函数简化操作

如果要计算一个数组每一项的平方

最开始的写法

```js
let array = [1, 2, 3, 4, 5]
for(let i=0; i<array.length; i++){
    array[i] = array[i]*array[i]
}
```

使用完整的函数

```js
let array = [1, 2, 3, 4, 5]
array.map(function(number){
    return number * number
})
```

使用箭头函数

```js
let array = [1, 2, 3, 4, 5]
array.map(number => number * number)
```

## Vue 中使用箭头函数

由于 Vue 很依赖 this ，所以在 Vue 中使用箭头函数，不允许在最外层使用，例如：

```js
new Vue({
    data(){
        
    },
    methods:{
        onClick1: function(){
            console.log(this)
        },
        // 此处 this 还是 window，所以使用箭头函数就无法拿到真正的this
        onClick2: ()=>{
            console.log(this) // 此处的 this === window 因为箭头函数外没有对象
        }
    }
})
```

只能在每个函数中使用，例如：

```js
new Vue({
    data(){
        
    },
    methods:{
        onClick1: function(){
            // 此处 this 已经拿到(vm对象)
            let fn = (p)=>{ console.log(p) }
        }
    }
})
```



