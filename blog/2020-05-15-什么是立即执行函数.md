---
title: 什么是立即执行函数
---

## 写法

正常函数调用

```js
function fn(){
    console.log(1)
}
fn()
```

理论上匿名函数的调用(立即执行)

```js
function (){
    console.log(1)
}()
```

但上面的语法在JS中是不被JS识别的，会报一个语法错误的错

解决方法

在函数前加 `!` 号，也可以使用 `+, -, ~, 1*` 等操作符的方式

```js
!function (){
    console.log(1)
}()
```

＞　注：上面的立即执行函数返回值是 `true` 因为原本函数没有给定返回值时的返回值默认是 `undefined` 。但添加了一个 `!` 号后取反，所以变成了 `true`

## 结论

1. 全局变量，容易发生冲突
2. 我想使用局部变量
3. JS 如果没有函数，就不能使用局部变量
4. 我声明一个函数，在里面使用局部变量
5. 但函数不能有名字，一旦有名字就会生成全局变量
6. 那就声明一个匿名函数，直接在函数后加 `()` 调用
7. Chrome 浏览器会提示语法错误
8. 在函数前加操作符，如 `!, +, -, ~` 等

终极结论：ES6之前的JS就是垃圾

## 立即执行函数+闭包

```js
var b = function (){
    var a = 1
    console.log(a)
    return function(){
        a++
    }
}
b() // 每次调用b都可以使立即执行函数内的变量a加一
```

