---
title: 新版字符串
date: 2020-05-11 11:01:32
weight: 40
---



## 多行字符串

### 旧版字符串的问题

例如要在字符串中换行

```js
var string = "<div>\
    <p>我是内容</p>\
</div>" // 结果不包含回车(换行)
```

错误案例

当在`\`后添加一个空格时，这样的代码就会报错。因为`\`必须要在每一行的最末尾添加才会有效。但是这样的问题很难避免，因为即使有空格也很难被发现

```js
var string = "<div>\ 
    <p>我是内容</p>\ 
</div>" // 结果错误，\ 后不能有空格
```

更好的写法

将每行用 `""` 括起来，并在每行后加一个 `+` 号

```js
var string = "<div>"+
    "<p>我是内容</p>"+
"</div>"
```

### ES6语法

相较于上面的写法更好

```js
let string = `
    <div>
        <p>我是内容</p>
    </div>
` // 结果包含回车
```

## 字符串插值

旧版方法

```js
var text = '我是一个阳光男孩'
var string1 = "<p>__text__</p>".replace('__text__', text)
var string2 = "<p>"+text+"</p>"
```

ES6语法

```js
let text = '我是一个阳光男孩'
let string = `
    <p>${text}</p>
`
```

## 函数调用字符串

**案例**

```js
let name = '方方'
let person = '人'
let fn = function () {
    console.log(arguments)
}
fn`${name} 是一个 ${person}` 
/* 输出:
[
    0: ["", " 是一个 ", ""]
    1: "方方"
    2: "人"  
]
 */
```

上面的案例输出的是一个数组，其中第一项是不包含变量的每段字符串组成的数组，后两项是两个变量的值

**使用**

在函数内可以判断传两个变量，根据对应变量返回对应值

```js
let name = '方方'
let person = '人'
let fn = function () {
    console.log(arguments)
    let strings = arguments[0]
    let var1 = arguments[1]
    let var2 = arguments[2]
    if(var1 === '方方'){
        return var1 + strings[1] + '好人'
    } else {
        return var1 + strings[1] + '坏人'
    }
}
fn`${name} 是一个 ${person}` 
```

在 react 中的 [styled-components](https://github.com/styled-components/styled-components#example) 就是使用了这种方法，在h1后加一段字符串格式的样式，函数会自动将字符串中的样式嵌到页面中