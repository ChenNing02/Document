---
weight: 50
title: 新版对象
---

内容

## 创建对象

案例

```js
var a = new Object() // ES5 有原型链的空对象
var b = Object.create(null) // ES6 什么都没有的空对象(真正的空对象)
var c = Object.create(Object.prototype) // ES6 有原型链的空对象
var d = {} // 有原型链的空对象
```

对象赋值

```js
let a = 1
let b = 2
let object = {
    a: a,
    b: b
}
let object = { a, b } // ES6写法
```

变量对象属性名

```js
let name = 'a'
let object = {
    [name]: 1
}
console.log(object) // 输出 {a: 1}
```

对象读取/写入权限

```js
let age = 18
let o = {
    get age(){ return age },
    set age(value){
        if(value<100){age = value}else{age = 100}
    }
}
console.log(age)   // 输出 18
console.log(o.age) // 输出 18
o.age = 1000
console.log(o.age) // 输出 100
```

实现 `a === 1 && a === 2 && a === 3` 结果为 true

```js
let i = 0
Object.defineProperty(window, 'a', {
    get(){
        i+=1
        return i
    },
})
a === 1 && a === 2 && a === 3 // 输出 true
```

> 原理：使用 get 控制每次访问 a 全局变量时的值即可 (每次访问都加一)

对象属性名运算

```js
let n = 2
let a = {
    [n*n + n/n + n/3]: 1
}
console.log(a) // 输出 {5.666666666666667: 1}
```

对象浅拷贝

```js
let obj1 = { a: 1, b: 2, c: 3 }
let obj2 = {}
for(let key in obj1){
    obj2[key] = obj1[key]
}
obj2 === obj1
console.log(obj1) // 输出 {a: 1, b: 2, c: 3}
console.log(obj2) // 输出 {a: 1, b: 2, c: 3}
obj2.a = 100 // obj2.a 为 100
obj1.a // obj1.a 为 1
```

浅拷贝

```js
let obj1 = { a: 1, b: 2, c: 3 }
let obj2 = {...obj1}
console.log(obj2)
```

ES6对象案例

```js
let obj1 = { a: 1 }
let obj2 = { b: 2 }
let obj3 = { c: 3 }
let aa = 1
let bb = 2
let obj4 = {
    ...obj1, ...obj2, ...obj3, aa, bb, get x(){ return 'hi' }
}
obj4
```

> 在 obj4 中添加 obj1 obj2 obj3 对象的属性，并添加变量 aa bb 为 obj4 的属性，设置属性x的访问值为 'hi'

设置对象原型

```js
let a = {}
a.__proto__
a.toString() // 输出 "[object Object]"
a.valueOf() // 输出 {}
a.__proto__ === Object.prototype // 输出 true
Object.prototype
let b = {
    sayHi(){
        console.log('hi')
    }
}
a = Object.create(b) // a的原型指向b
a.__proto__ === b // 输出 true
```

查看原型

```js
let a = {}
a.__proto__
Object.getPrototypeOf(a) // 推荐写法
```

使用 `hasOwnProperty('__proto__')` 无法查看原型属性

```js
a.hasOwnProperty('__proto__') // 输出 false
```

